---
alwaysApply: false
---

# Code Audit Checklist

Tento soubor obsahuje kontroln√≠ body pro audit k√≥du. P≈ôi auditu zkontroluj ka≈æd√Ω bod a ovƒõ≈ô, zda k√≥d odpov√≠d√° projektov√Ωm pravidl≈Øm.

## ‚ö†Ô∏è D≈ÆLE≈ΩIT√â: Audit je pouze informativn√≠

**Audit je pouze informativn√≠ n√°stroj pro u≈æivatele. Po dokonƒçen√≠ auditu NESM√ç≈† automaticky zaƒç√≠t upravovat k√≥d.**

- Audit report pouze identifikuje probl√©my a n√°vrhy na zlep≈°en√≠
- U≈æivatel rozhodne, kter√© probl√©my chce opravit a kdy
- Pokud u≈æivatel explicitnƒõ nepo≈æ√°d√° o opravu, pouze vytvo≈ô audit report
- Nezaƒç√≠nej automaticky upravovat soubory po vytvo≈ôen√≠ audit reportu

**‚ö†Ô∏è D≈ÆLE≈ΩIT√â: Tato pravidla plat√≠ pouze pro frontend projekt (`frontend/`). CMS projekt (`cms/`) m√° vlastn√≠ pravidla.**

## üìã Code Style Audit

### Prettier Form√°tov√°n√≠
- [ ] Indentace: 4 mezery (ne tabs)
- [ ] Pou≈æit√≠ single quotes m√≠sto double quotes
- [ ] V≈°echny ≈ô√°dky konƒç√≠ st≈ôedn√≠kem
- [ ] Maxim√°ln√≠ d√©lka ≈ô√°dku: 120 znak≈Ø
- [ ] Trailing commas na konci objekt≈Ø/pole

### TypeScript
- [ ] V≈°echny nov√© soubory jsou TypeScript (.ts/.tsx)
- [ ] ≈Ω√°dn√© pou≈æit√≠ `any` typu (pou≈æ√≠t konkr√©tn√≠ typy nebo `unknown`)
- [ ] Spr√°vn√© pou≈æit√≠ type inference kde je to mo≈æn√©
- [ ] Sd√≠len√© typy jsou v `src/types/`
- [ ] Typy jsou spr√°vnƒõ definovan√© a pou≈æ√≠van√©

### Pojmenov√°n√≠
- [ ] Komponenty: PascalCase (nap≈ô. `UserProfile.tsx`)
- [ ] Soubory: odpov√≠daj√≠ n√°zvu komponenty nebo kebab-case pro utility
- [ ] Funkce/Promƒõnn√©: camelCase
- [ ] Konstanty: UPPER_SNAKE_CASE
- [ ] Typy/Interface: PascalCase s popisn√Ωmi n√°zvy

### Organizace soubor≈Ø
- [ ] Jeden komponent na soubor
- [ ] Default export pro hlavn√≠ komponent
- [ ] Named exports pro utility a typy
- [ ] Souvisej√≠c√≠ soubory jsou ve spr√°vn√Ωch slo≈æk√°ch

## ‚öõÔ∏è React & Relay Audit

### React Best Practices
- [ ] Pou≈æit√≠ funkcion√°ln√≠ch komponent s hooks
- [ ] Komponenty jsou mal√© a zamƒõ≈ôen√© na jednu vƒõc
- [ ] Opakovan√° logika je extrahov√°na do custom hooks
- [ ] Preferov√°na kompozice p≈ôed dƒõdiƒçnost√≠
- [ ] Komponenta m≈Ø≈æe vracet `<></>` (pr√°zdn√Ω fragment) pro pr√°zdn√Ω render - je to akceptovateln√©
- [ ] **Pozn√°mka:** `forwardRef`, `React.memo` a podobn√© optimalizace jsou voliteln√© - zkontroluj, zda je to standard v projektu p≈ôed oznaƒçen√≠m jako chyba

### Relay GraphQL
- [ ] **V≈†ECHNY** GraphQL dotazy pou≈æ√≠vaj√≠ Relay fragmenty (viz `relay/app.ts`, `relay/article.ts` jako p≈ô√≠klady)
- [ ] Fragmenty jsou definovan√© pomoc√≠ `graphql` template literals v `relay/` souborech
- [ ] Queries pou≈æ√≠vaj√≠ fragmenty s `@relay(mask: false)` direktivou
- [ ] Po vytvo≈ôen√≠/zmƒõnƒõ query/fragmentu byl spu≈°tƒõn `npm run relay`
- [ ] Generated typy v `__generated__/` nejsou ruƒçnƒõ editovan√©
- [ ] Fragmenty jsou spr√°vnƒõ organizovan√© v `relay/` souborech podle dom√©ny (nap≈ô. `app.ts`, `article.ts`)

### Utils/Strapi Funkce
- [ ] **V≈†ECHNY** utils/strapi funkce pou≈æ√≠vaj√≠ vygenerovan√© typy z `relay/__generated__/` (nap≈ô. `appImageFragment$data`, `articleFragment$data`)
- [ ] Typy jsou importovan√© z `__generated__` soubor≈Ø, ne definovan√© ruƒçnƒõ
- [ ] Pou≈æit√≠ `Omit<FragmentType$data, ' $fragmentType'>` pro vytvo≈ôen√≠ typu bez fragment type
- [ ] ≈Ω√°dn√© ruƒçnƒõ definovan√© typy pro Strapi data v utils/strapi funkc√≠ch
- [ ] ≈Ω√°dn√© pou≈æit√≠ `any` typu pro Strapi data (pou≈æ√≠t vygenerovan√© typy)
- [ ] Viz p≈ô√≠klady: `utils/strapi/getImageType.ts`, `utils/strapi/getAddressingType.ts`

## üîå Providers Audit

### Provider Rules
- [ ] Provider je spr√°vnƒõ implementov√°n podle typu (ElasticProvider vs StrapiProvider)
- [ ] **KRITICK√â**: Provider dƒõd√≠c√≠ z `AbstractElasticProvider` nebo `AbstractSingletonElasticProvider` NESM√ç filtrovat podle `publishedAt` v `getFilterParams` - rozb√≠j√≠ to reindexaci
- [ ] Pro ElasticProvider pou≈æijte jin√© pole pro filtrov√°n√≠ podle data (nap≈ô. `publishDate`) nebo nefiltrujte podle data v≈Øbec
- [ ] Provider spr√°vnƒõ implementuje povinn√© metody: `getApiKey()`, `getId()`, `getFilterParams()`
- [ ] Provider pou≈æ√≠v√° Relay queries z `relay/` slo≈æky
- [ ] Provider je exportov√°n jako singleton instance
- [ ] Viz detailn√≠ pravidla: `.cursor/rules/providers.mdc`

## üé® Styling Audit

**‚ö†Ô∏è D≈ÆLE≈ΩIT√â: Tato pravidla plat√≠ pouze pro frontend projekt (`frontend/`). CMS projekt (`cms/`) m√° vlastn√≠ pravidla.**

### CSS Architektura
- [ ] SCSS (`.scss`) pro komponentov√© styly
- [ ] SCSS Modules pro scoped styly
- [ ] Tailwind CSS 3 pro utility t≈ô√≠dy
- [ ] SCSS Modules pro komponent-specifick√© styly
- [ ] Tailwind pro rychl√© utility styling

### File Naming
- [ ] Komponentov√© styly: `ComponentName.module.scss`
- [ ] Glob√°ln√≠ styly v `src/styles/`
- [ ] Spr√°vn√Ω import: `import styles from './ComponentName.module.scss'`

### Best Practices
- [ ] SCSS Modules pro prevenci style konflikt≈Ø
- [ ] Tailwind utilities pro spacing, colors, typography
- [ ] Komponentov√© styly jsou co-located s komponenty
- [ ] CSS variables pro theme hodnoty
- [ ] **Tailwind t≈ô√≠dy v SCSS**: T≈ô√≠dy jsou seskupen√© podle breakpoint≈Ø na samostatn√Ωch ≈ô√°dc√≠ch
  - Prvn√≠ ≈ô√°dek: v≈°echny z√°kladn√≠ t≈ô√≠dy bez breakpointu (mobile-first)
  - Dal≈°√≠ ≈ô√°dky: v≈°echny t≈ô√≠dy se stejn√Ωm breakpoint prefixem seskupen√© na jednom ≈ô√°dku
  - Ka≈æd√Ω breakpoint (`mobile-landscape:`, `tablet:`, `tablet-landscape:`, `desktop:`, `large-desktop:`, `fullhd:`) m√° sv≈Øj vlastn√≠ ≈ô√°dek
  - V≈°echny t≈ô√≠dy pro stejn√Ω breakpoint mus√≠ b√Ωt na stejn√©m ≈ô√°dku
  - P≈ô√≠klad: `@apply w-full flex flex-col gap-8 relative;` na prvn√≠m ≈ô√°dku, `@apply tablet-landscape:pl-6 tablet-landscape:gap-10;` na dal≈°√≠m ≈ô√°dku, `@apply desktop:pl-10 desktop:gap-12;` na dal≈°√≠m ≈ô√°dku
- [ ] **≈Ω√°dn√© arbitrary values v Tailwind**: Nepou≈æ√≠vej arbitrary values v Tailwind t≈ô√≠d√°ch (nap≈ô. `w-[19.375rem]`, `rounded-[0.5625rem]`)
  - **Pro spacing/sizing hodnoty** (width, height, margin, padding): Pou≈æij CSS vlastnosti p≈ô√≠mo v SCSS modulu
    - P≈ô√≠klad ≈°patnƒõ: `@apply w-[19.375rem];`
    - P≈ô√≠klad spr√°vnƒõ: `.container { width: 19.375rem; }`
  - **Pro design tokens** (border-radius, colors, shadows, atd.): Roz≈°i≈ô Tailwind konfiguraci o custom hodnoty m√≠sto arbitrary values
    - P≈ô√≠klad ≈°patnƒõ: `@apply rounded-[0.5625rem];`
    - P≈ô√≠klad spr√°vnƒõ: P≈ôidej hodnotu do Tailwind konfigurace a pou≈æij `@apply rounded-custom;` nebo pou≈æij CSS vlastnost: `.container { border-radius: 0.5625rem; }`
  - Pokud existuj√≠ vhodn√© standardn√≠ Tailwind utility t≈ô√≠dy, pou≈æij je (nap≈ô. `rounded-lg` m√≠sto `rounded-[0.5625rem]` pokud je to dostateƒçnƒõ bl√≠zko)

### Tailwind 3 Specific
- [ ] Tailwind 3 pou≈æ√≠v√° JavaScript/TypeScript konfiguraƒçn√≠ soubor (`tailwind.config.ts`)
- [ ] Glob√°ln√≠ styly pou≈æ√≠vaj√≠ `@tailwind` direktivy (`@tailwind base;`, `@tailwind components;`, `@tailwind utilities;`)
- [ ] PostCSS konfigurace pou≈æ√≠v√° standardn√≠ Tailwind PostCSS plugin

### Responsive Design
- [ ] Tailwind responsive prefixes pou≈æ√≠vaj√≠ vlastn√≠ breakpointy: `mobile-landscape:`, `tablet:`, `tablet-landscape:`, `desktop:`, `large-desktop:`, `fullhd:`
- [ ] Mobile-first p≈ô√≠stup
- [ ] Breakpointy jsou definovan√© v `tailwind.config.ts`

---

## üéØ Priority v Audit Reportu

P≈ôi vytv√°≈ôen√≠ audit reportu je d≈Øle≈æit√© spr√°vnƒõ kategorizovat probl√©my podle priority. Rozli≈°ujeme dva typy probl√©m≈Ø:

### ‚ö†Ô∏è D≈ÆLE≈ΩIT√â: Stav projektu - P≈ô√≠prava na napojen√≠ na BE

**Projekt se aktu√°lnƒõ p≈ôipravuje staticky na napojen√≠ na backend, proto jsou n√°sleduj√≠c√≠ vƒõci akceptovateln√©:**

- **`console.log()` a debug k√≥d** - jsou v po≈ô√°dku bƒõhem p≈ô√≠pravn√© f√°ze projektu
- **Zakomentovan√Ω k√≥d** - je v po≈ô√°dku, pokud je to p≈ô√≠prava na budouc√≠ implementaci (nap≈ô. API vol√°n√≠, startTransition)
- **Placeholder implementace** - je v po≈ô√°dku, pokud je jasn√©, ≈æe se jedn√° o doƒçasn√© ≈ôe≈°en√≠ p≈ôed napojen√≠m na BE

**‚ö†Ô∏è Pozor:** Tyto vƒõci by mƒõly b√Ωt oznaƒçeny jako **N√°vrhy na zlep≈°en√≠** m√≠sto **Chyby**, pokud jsou souƒç√°st√≠ p≈ô√≠pravy na napojen√≠ na BE. Pokud je v≈°ak jasn√©, ≈æe jde o skuteƒçn√Ω probl√©m (nap≈ô. zapomenut√Ω debug k√≥d v produkci), oznaƒç to jako chybu.

### ‚ö†Ô∏è D≈ÆLE≈ΩIT√â: Kontrola podobn√Ωch komponent p≈ôed oznaƒçen√≠m chyby

**P≈ôed t√≠m, ne≈æ oznaƒç√≠≈° nƒõco jako chybu, v≈ædy zkontroluj podobn√© komponenty v projektu:**
- Jak jsou ≈ôe≈°eny podobn√© komponenty?
- Je to skuteƒçnƒõ chyba, nebo jen jin√Ω zp≈Øsob implementace?
- Je to standard v projektu, nebo v√Ωjimka?

**P≈ô√≠klad:** Pokud podobn√© komponenty nepou≈æ√≠vaj√≠ `forwardRef`, nen√≠ to chyba, ale n√°vrhov√© rozhodnut√≠.

### üî¥ Vysok√° priorita - Technick√© probl√©my (Opravit okam≈æitƒõ)

Tyto probl√©my maj√≠ **vysokou prioritu** a mƒõly by b√Ωt opraveny bez diskuse:

- **Form√°tov√°n√≠ k√≥du** - nespr√°vn√© odsazen√≠, chybƒõj√≠c√≠ st≈ôedn√≠ky, trailing commas, atd.
- **TypeScript chyby** - pou≈æit√≠ `any`, chybƒõj√≠c√≠ typy, nespr√°vn√© typy
- **Pojmenov√°n√≠** - nekonzistentn√≠ naming conventions, ≈°patn√© n√°zvy promƒõnn√Ωch/funkc√≠/komponent
- **Stylov√°n√≠** - nespr√°vn√° SCSS struktura, chybƒõj√≠c√≠ SCSS Modules, nespr√°vn√© Tailwind pou≈æit√≠
- **React Best Practices** - nespr√°vn√© pou≈æit√≠ hooks, ≈°patn√° struktura komponent
- **P≈ô√≠stupnost (a11y)** - chybƒõj√≠c√≠ aria atributy **pouze pokud je to standard v projektu** (zkontroluj podobn√© komponenty)
- **Bezpeƒçnost** - XSS zranitelnosti, nevalidovan√© vstupy, atd.
- **Dokumentace** - chybƒõj√≠c√≠ JSDoc koment√°≈ôe (pokud je to standard v projektu)

**‚ö†Ô∏è Pozor:** 
- Pokud podobn√© komponenty nƒõco nemaj√≠ (nap≈ô. `forwardRef`, `aria-label`), nen√≠ to chyba, ale n√°vrhov√© rozhodnut√≠.
- **`console.log()` a zakomentovan√Ω k√≥d nejsou chyby**, pokud jsou souƒç√°st√≠ p≈ô√≠pravy na napojen√≠ na BE (viz sekce v√Ω≈°e).

**Form√°t v reportu:**
```
### ‚ùå Chyby (Vysok√° priorita)
- [Popis probl√©mu s n√°vrhem konkr√©tn√≠ opravy]
- [Uveƒè porovn√°n√≠ s podobn√Ωmi komponentami, pokud je relevantn√≠]
```

### üü° N√≠zk√° priorita - N√°vrhov√©/logick√© probl√©my (Diskuse s t√Ωmem)

Tyto probl√©my jsou sp√≠≈°e **n√°vrhov√© rozhodnut√≠** a mƒõly by b√Ωt prodiskutov√°ny s t√Ωmem p≈ôed implementac√≠:

- **Chybƒõj√≠c√≠ props** - pokud komponenta nem√° nƒõjak√© props, kter√© by mohla m√≠t (ale nen√≠ to chyba)
- **Chybƒõj√≠c√≠ export typ≈Ø/interface** - pokud komponenta nem√° exportovan√Ω props interface nebo typ, zkontroluj, zda nebude t≈ôeba tento typ nƒõkde importovat (nap≈ô. pro type safety v jin√Ωch komponent√°ch nebo pro roz≈°√≠≈ôen√≠ komponenty)
- **N√°vrhov√© rozhodnut√≠** - r≈Øzn√© zp≈Øsoby implementace, kter√© nejsou nutnƒõ ≈°patn√©
- **Logika komponent** - n√°vrhy na zmƒõnu logiky, kter√© ovliv≈àuj√≠ chov√°n√≠ komponenty
- **API design** - n√°vrhy na zmƒõnu API komponenty (p≈ôid√°n√≠ nov√Ωch props, zmƒõna existuj√≠c√≠ch)
- **Architektura** - n√°vrhy na zmƒõnu struktury nebo architektury komponenty
- **React Best Practices (voliteln√©)** - `forwardRef`, `React.memo`, atd. - pouze pokud to nen√≠ standard v projektu
- **P≈ô√≠stupnost (voliteln√©)** - `aria-label`, atd. - pouze pokud to nen√≠ standard v projektu

**Form√°t v reportu:**
```
### üí° N√°vrhy na zlep≈°en√≠ (Diskuse s t√Ωmem)
- [Popis n√°vrhu s vysvƒõtlen√≠m, proƒç by to mohlo b√Ωt u≈æiteƒçn√©]
- [Porovn√°n√≠ s podobn√Ωmi komponentami, pokud je relevantn√≠]
- [Naznaƒç, ≈æe se m√° program√°tor poradit s t√Ωmem p≈ôed implementac√≠]
```

**P≈ô√≠klad:**
```
### üí° N√°vrhy na zlep≈°en√≠ (Diskuse s t√Ωmem)
- **P≈ôid√°n√≠ `disabled` prop**: Komponenta nem√° podporu pro disabled stav. 
  Zva≈æte p≈ôid√°n√≠ t√©to funkcionality pro konzistenci s ostatn√≠mi inputy v projektu.
  **Porovn√°n√≠:** `TextInput` a `DateInput` maj√≠ `disabled` prop.
  **Doporuƒçen√≠:** Prodiskutujte s t√Ωmem, zda je tato funkcionalita pot≈ôebn√°.

- **Export props interface**: Interface `SelectInputProps<T>` nen√≠ exportov√°n.
  Zkontrolujte, zda nebude t≈ôeba tento typ nƒõkde importovat (nap≈ô. pro type safety v jin√Ωch komponent√°ch, 
  pro roz≈°√≠≈ôen√≠ komponenty nebo pro vytvo≈ôen√≠ wrapper komponenty).
  **Porovn√°n√≠:** `TextInput` exportuje `TextInputProps`, `DateInput` exportuje `DateInputProps`.
  **Doporuƒçen√≠:** Pokud pl√°nujete pou≈æ√≠vat tento typ jinde v projektu, zva≈æte jeho export.
```

### üìã Kategorizace probl√©m≈Ø

P≈ôi auditu se ptej v tomto po≈ôad√≠:

1. **Je to souƒç√°st p≈ô√≠pravy na napojen√≠ na BE?** (console.log, zakomentovan√Ω k√≥d, placeholder implementace) ‚Üí N√≠zk√° priorita nebo Pozn√°mka
2. **Jak jsou ≈ôe≈°eny podobn√© komponenty v projektu?** ‚Üí Pokud to nemaj√≠, nen√≠ to chyba
3. **Je to technick√° chyba?** (form√°tov√°n√≠, TypeScript) ‚Üí Vysok√° priorita
4. **Je to nesoulad s projektov√Ωmi pravidly?** ‚Üí Vysok√° priorita (ale zkontroluj podobn√© komponenty)
5. **Je to n√°vrhov√© rozhodnut√≠?** ‚Üí N√≠zk√° priorita (diskuse s t√Ωmem)
6. **M≈Ø≈æe to b√Ωt udƒõl√°no r≈Øzn√Ωmi zp≈Øsoby?** ‚Üí N√≠zk√° priorita (diskuse s t√Ωmem)
7. **Zach√°z√≠ to do logiky komponent?** (chybƒõj√≠c√≠ props, r≈Øzn√© zp≈Øsoby implementace) ‚Üí N√≠zk√° priorita (diskuse s t√Ωmem)

---

## Audit Report Template

P≈ôi auditu pou≈æij tento template a ulo≈æ report do `.cursor/audit-reports/[ComponentName].md`:

**‚ö†Ô∏è POZOR:** Po vytvo≈ôen√≠ audit reportu NESM√ç≈† automaticky zaƒç√≠t upravovat k√≥d. Audit je pouze informativn√≠ - u≈æivatel rozhodne, kter√© probl√©my chce opravit.

```
## Audit Report - [N√°zev souboru/komponenty]

**Datum**: [datum]
**Auditor**: [jm√©no]
**Komponenta**: `[cesta k souboru]`

### ‚úÖ Pro≈°lo
- [seznam pro≈°l√Ωch kontrol]

### ‚ö†Ô∏è Varov√°n√≠
- [seznam varov√°n√≠ s popisem]

### ‚ùå Chyby
- [seznam chyb s popisem a n√°vrhem opravy]

### üìù Pozn√°mky
- [dal≈°√≠ pozn√°mky]
```

### Audit Report Location
- [ ] Audit reporty se ukl√°daj√≠ do `.cursor/audit-reports/` slo≈æky
- [ ] N√°zev souboru: `[ComponentName].md` (nap≈ô. `Error.md`, `Button.md`)
- [ ] Pro celkov√Ω audit projektu pou≈æij n√°zev `project-overview.md`
